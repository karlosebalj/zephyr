/ {
	chosen {
	  zephyr,console = &uart0;
	//   zephyr,display = &spd2010;
	  zephyr,canbus = &mcp2518fd;
	};
  
	power_supply_pins {
	  compatible = "gpio-keys";
		display_pwr_en: display_pwr {
		  gpios = <&gpio0 7 GPIO_ACTIVE_HIGH>;
		  label = "Display power enable";
		};
	};
  
	leds {
	  compatible = "gpio-leds";
		rgb_led_en: rgb_led {
		  gpios = <&gpio1 6 GPIO_ACTIVE_HIGH>;
		  label = "Enable LED";
		};
	};
  
	interrupt_pins {
	  compatible = "gpio-keys";
		system_interrupt_1: system_int_1 {
		  gpios = <&gpio0 29 GPIO_ACTIVE_HIGH>;
		  label = "NRF5340 to NRF9160 int 1";
		}; 
		system_interrupt_2: system_int_2 {
		  gpios = <&gpio1 10 GPIO_ACTIVE_HIGH>;
		  label = "NRF5340 to NRF9160 int 2";
		};
		amb_light_interrupt: amb_light_int {
		  gpios = <&gpio1 7 GPIO_ACTIVE_LOW>;
		  label = "Ambient light interrupt";
		};
		qorvo_interrupt_1: qorvo_int_1 {
		  gpios = <&gpio0 21 GPIO_ACTIVE_LOW>;
		  label = "Qorvo interrupt 1";
		}; 
		qorvo_interrupt_2: qorvo_int_2 {
		  gpios = <&gpio0 19 GPIO_ACTIVE_LOW>;
		  label = "Qorvo interrupt 2";
		};
		eeprom_interrupt: eeprom_int {
		  gpios = <&gpio0 4 GPIO_ACTIVE_LOW>;
		  label = "Eeprom interrupt";
		}; 
		touch_interrupt: touch_int {
		  gpios = <&gpio1 1 GPIO_ACTIVE_LOW>;
		  label = "Eeprom interrupt";
		}; 
		ism330_interrupt_1: ism330_int_1 {
		  // TODO: Commented is the pin on the real pcb;
		  // currently used by CAN MCP2518FD controller;
		  // uncomment when pcb is manufactured
		  // gpios = <&gpio1 9 GPIO_ACTIVE_HIGH>;
		  gpios = <&gpio1 12 GPIO_ACTIVE_HIGH>;
		  label = "ISM330 interrupt 1";
		};
		ism330_interrupt_2: ism330_int_2 {
		  gpios = <&gpio0 23 GPIO_ACTIVE_HIGH>;
		  label = "ISM330 interrupt 2";
		}; 
	};
  
  
	reset_pins {
	  compatible = "gpio-keys";
		touch_reset: touch_rst {
		  gpios = <&gpio1 0 GPIO_ACTIVE_LOW>;
		  label = "Touch reset";
		};
	};
  
	aliases {
	  uart-link-nrf9160 = &uart1;
	  backlight-pwm = &pwm0;
	  display-pwr = &display_pwr_en;
	  led = &rgb_led_en;
	  system-int1 = &system_interrupt_1;
	  system-int2 = &system_interrupt_2;
	  amblight-int = &amb_light_interrupt;
	  qorvo-int1 = &qorvo_interrupt_1;
	  qorvo-int2 = &qorvo_interrupt_2;
	  eeprom-temp-int = &eeprom_interrupt;
	  touch-interrupt = &touch_interrupt;
	  ism330-interrupt1 = &ism330_interrupt_1;
	  ism330-interrupt2 = &ism330_interrupt_2;
	  touch-reset = &touch_reset;
	};
  
  };
  
  &pinctrl {
	uart1_default: uart1_default {
	  group1 {
		psels = <NRF_PSEL(UART_TX, 1, 10)>;
	  };
	  group2 {
		psels = <NRF_PSEL(UART_RX, 1, 11)>;
		bias-pull-up;
	  };
	};
  
	uart1_sleep: uart1_sleep {
	  group1 {
		psels = <NRF_PSEL(UART_TX, 1, 10)>,
				<NRF_PSEL(UART_RX, 1, 11)>;
		low-power-enable;
	  };
	};
	
  
	i2c2_default: i2c2_default {
	  group1 {
		psels = <NRF_PSEL(TWIM_SDA, 1, 2)>,
		  <NRF_PSEL(TWIM_SCL, 1, 3)>;
	  };
	};
  
	i2c2_sleep: i2c2_sleep {
	  group1 {
		psels = <NRF_PSEL(TWIM_SDA, 1, 2)>,
		  <NRF_PSEL(TWIM_SCL, 1, 3)>;
		low-power-enable;
	  };
	};
  
	spi3_default: spi3_default {
	  group1 {
		psels = <NRF_PSEL(SPIM_SCK, 0, 25)>,
		<NRF_PSEL(SPIM_MISO, 0, 27)>,
		<NRF_PSEL(SPIM_MOSI, 0, 26)>;
	  };     
	};
  
	spi3_sleep: spi3_sleep {
	  group1 {
		psels = <NRF_PSEL(SPIM_SCK, 0, 25)>,
		<NRF_PSEL(SPIM_MISO, 0, 27)>,
		<NRF_PSEL(SPIM_MOSI, 0, 26)>;
		low-power-enable;
	  };
	};
  
	spi4_default: spi4_default {
	  group1 {
		psels = <NRF_PSEL(SPIM_SCK, 0, 8)>,
		<NRF_PSEL(SPIM_MOSI, 0, 9)>;
	  };
	};
  
	spi4_sleep: spi4_sleep {
	  group1 {
		psels = <NRF_PSEL(SPIM_SCK, 0, 8)>,
		<NRF_PSEL(SPIM_MOSI, 0, 9)>;
		low-power-enable;
	  };
	};
  
  
	pwm0_default: pwm0_default {
	  group1 {
			  psels = <NRF_PSEL(PWM_OUT0, 1, 8)>;
			  nordic,invert;
	  };
	};
  
	pwm0_sleep: pwm0_sleep {
	  group1 {
			  psels = <NRF_PSEL(PWM_OUT0, 1, 8)>;
			  low-power-enable;
	  };
	};
  
  };
  
  &uart1 {
	status = "okay";
	compatible = "nordic,nrf-uarte";
	current-speed = <115200>;
	pinctrl-0 = <&uart1_default>;
	pinctrl-1 = <&uart1_sleep>;
	pinctrl-names = "default", "sleep";
  };
  
  /* Needs disabling since i2c1 and spi1 share the same address space. */
  &i2c1 {
	  status = "disabled";
  };
  
  &i2c2 {
	compatible = "nordic,nrf-twim";
	status = "okay";
	pinctrl-0 = <&i2c2_default>;
	pinctrl-1 = <&i2c2_sleep>;
	pinctrl-names = "default", "sleep";
	
	dps310@77 {
	  compatible = "infineon,dps310";
	  reg = <0x77>;
	};
  
	opt3001x@44 {
	  compatible = "ti,opt3001";
	  reg = <0x44>;
	};
	
	qorvo_top:qorvo_top@4f{
	  compatible = "i2c-device";
	  reg = < 0x4f>;
	  };
  
	qorvo_bottom:qorvo_bottom@4e{
	  compatible = "i2c-device";
	  reg = < 0x4e>;
	 };
  
	eeprom: eeprom@50 {
	  reg = <0x50>;
	};
  
	eeprom_temp: eeprom_temp@18 {
	  reg = <0x18>;
	};
  };
  
  &spi3 {
	compatible = "nordic,nrf-spim";
	status = "okay";
	pinctrl-0 = <&spi3_default>;
	pinctrl-1 = <&spi3_sleep>;
	pinctrl-names = "default", "sleep";
	
	/*In Altium schematic CS is on P0.22 - change when pin will be free*/
	/* TODO - uncomment when the patch for ISM330 driver is applied*/ 
	/*cs-gpios = <&gpio1 9 GPIO_ACTIVE_LOW>;
	ism330dhcx: ism330dhcx@0 {
	  compatible = "st,ism330dhcx";
	  reg = <0x0>;
	  spi-max-frequency = <125000>;
	  }; */
  
	/* TODO - the right cs pin from schematic is unavailable on the nrf5340 proto board;
	change cs pin once PCB is manufactured*/
	/*cs-gpios = <&gpio0 20 GPIO_ACTIVE_LOW>;*/
	cs-gpios = <&gpio1 9 GPIO_ACTIVE_LOW>;
	mcp2518fd: mcp2518fd@0 {
		compatible = "microchip,mcp251xfd";
		status = "okay";

		spi-max-frequency = <18000000>;
		/* TODO - the right int pin from schematic is unavailable on the nrf5340 proto board;
		change int pin once PCB is manufactured*/
		/*int-gpios = <&gpio1 13 GPIO_ACTIVE_LOW>;*/
		int-gpios = <&gpio1 04 GPIO_ACTIVE_LOW>;
		reg = <0x0>;
		osc-freq = <40000000>;

		bus-speed = <125000>;
		sample-point = <875>;
		bus-speed-data = <1000000>;
		sample-point-data = <875>;
	};
  };
  
  &pwm0 {
	  status = "okay";
	  pinctrl-0 = <&pwm0_default>;
	  pinctrl-1 = <&pwm0_sleep>;
	  pinctrl-names = "default", "sleep";
  };
  
  // TODO: check dc, cs and reset gpios once PCB is manufactured, 
  // it may be a bit different
  &spi4  {
	  status = "okay";
	  compatible = "nordic,nrf-spim";
	  pinctrl-0 = <&spi4_default>;
	  pinctrl-1 = <&spi4_sleep>;
	  pinctrl-names = "default", "sleep";
	  cs-gpios = <&gpio0 6 GPIO_ACTIVE_LOW>;
  
	//   spd2010: spd2010@0 {
	// 	  compatible = "solomon,spd2010";
	// 	  status = "okay";
	// 	  spi-max-frequency = <40000000>;
	// 	  reg = <0>;
	// 	  width = <180>;
	// 	  height = <454>;
	// 	  label = "solomon_spd2010";
	// 	  dc-gpios = <&gpio0 12 GPIO_ACTIVE_HIGH>; 
	// 	  reset-gpios = <&gpio0 5 GPIO_ACTIVE_HIGH>;
	//   };
  };
  