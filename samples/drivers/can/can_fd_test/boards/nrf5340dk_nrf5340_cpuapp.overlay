/ {
	chosen {
	  zephyr,console = &uart0;
	  // zephyr,display = &spd2010;
	  zephyr,canbus = &mcp2518fd_mikroe_mcp2518fd_click;
	};
  
	aliases {
	  uart-link-nrf9160 = &uart1;
	  backlight-pwm = &pwm0;
	};
  };
  
  &pinctrl {
	uart1_default: uart1_default {
	  group1 {
		psels = <NRF_PSEL(UART_TX, 1, 10)>;
	  };
	  group2 {
		psels = <NRF_PSEL(UART_RX, 1, 11)>;
		bias-pull-up;
	  };
	};
  
	uart1_sleep: uart1_sleep {
	  group1 {
		psels = <NRF_PSEL(UART_TX, 1, 10)>,
				<NRF_PSEL(UART_RX, 1, 11)>;
		low-power-enable;
	  };
	};
  
  
	i2c2_default: i2c2_default {
	  group1 {
		psels = <NRF_PSEL(TWIM_SDA, 1, 2)>,
		  <NRF_PSEL(TWIM_SCL, 1, 3)>;
	  };
	};
  
	i2c2_sleep: i2c2_sleep {
	  group1 {
		psels = <NRF_PSEL(TWIM_SDA, 1, 2)>,
		  <NRF_PSEL(TWIM_SCL, 1, 3)>;
		low-power-enable;
	  };
	};
  
	spi3_default: spi3_default {
	  group1 {
		psels = <NRF_PSEL(SPIM_SCK, 0, 25)>,
		<NRF_PSEL(SPIM_MOSI, 0, 26)>,
		<NRF_PSEL(SPIM_MISO, 0, 27)>;
	  };
	};
  
	spi3_sleep: spi3_sleep {
	  group1 {
		psels = <NRF_PSEL(SPIM_SCK, 0, 25)>,
		<NRF_PSEL(SPIM_MOSI, 0, 26)>,
		<NRF_PSEL(SPIM_MISO, 0, 27)>;
		low-power-enable;
	  };
	};
  
	spi4_default: spi4_default {
	  group1 {
	    psels = <NRF_PSEL(SPIM_SCK, 0, 8)>,
	    <NRF_PSEL(SPIM_MOSI, 0, 9)>;
	  };
	};
  
	spi4_sleep: spi4_sleep {
	  group1 {
	    psels = <NRF_PSEL(SPIM_SCK, 0, 8)>,
	    <NRF_PSEL(SPIM_MOSI, 0, 9)>;
	    low-power-enable;
	  };
	};
  
  
	pwm0_default: pwm0_default {
	  group1 {
			  psels = <NRF_PSEL(PWM_OUT0, 1, 8)>;
			  nordic,invert;
	  };
	};
  
	pwm0_sleep: pwm0_sleep {
	  group1 {
			  psels = <NRF_PSEL(PWM_OUT0, 1, 8)>;
			  low-power-enable;
	  };
	};
  
  };
  
  &uart1 {
	status = "okay";
	compatible = "nordic,nrf-uarte";
	current-speed = <115200>;
	pinctrl-0 = <&uart1_default>;
	pinctrl-1 = <&uart1_sleep>;
	pinctrl-names = "default", "sleep";
  };
  
  /* Needs disabling since i2c1 and spi1 share the same address space. */
  &i2c1 {
	  status = "disabled";
  };
  
  &i2c2 {
	compatible = "nordic,nrf-twim";
	status = "okay";
	pinctrl-0 = <&i2c2_default>;
	pinctrl-1 = <&i2c2_sleep>;
	pinctrl-names = "default", "sleep";
  
	dps310@77 {
	  compatible = "infineon,dps310";
	  reg = <0x77>;
	};
  };
  
  &spi3 {
	compatible = "nordic,nrf-spim";
	status = "okay";
	pinctrl-0 = <&spi3_default>;
	pinctrl-1 = <&spi3_sleep>;
	pinctrl-names = "default", "sleep";
  
	/*In Altium schematic CS is on P0.22 - change when pin will be free*/
	/* TODO - uncomment when the patch for ISM330 driver is applied*/
	/*cs-gpios = <&gpio1 9 GPIO_ACTIVE_LOW>;
	ism330dhcx: ism330dhcx@0 {
	  compatible = "st,ism330dhcx";
	  reg = <0x0>;
	  spi-max-frequency = <125000>;
	  }; */
  
	// compatible = "nordic,nrf-spim";
	  cs-gpios = <&gpio1 9 GPIO_ACTIVE_LOW>;
	  

	
	mcp2518fd_mikroe_mcp2518fd_click: mcp2518fd@0 {
		compatible = "microchip,mcp251xfd";
		status = "okay";

		spi-max-frequency = <18000000>;
		int-gpios = <&gpio1 04 GPIO_ACTIVE_LOW>;
		reg = <0x0>;
		osc-freq = <40000000>;

		bus-speed = <125000>;
		sample-point = <875>;
		bus-speed-data = <1000000>;
		sample-point-data = <875>;

		sjw = <4>;
		prop-seg = <0>;
		phase-seg1 = <15>;
		phase-seg2 = <4>;
		prop-seg-data = <0>;
		phase-seg1-data = <7>;
		phase-seg2-data = <2>;
		sjw-data = <2>;
	};
	//   mcp2518fd: canfd@0 {
	// 	  compatible = "microchip,mcp251xfd";
	// 	  status = "okay";
  
	// 	  spi-max-frequency = <1000000>;
	// 	  reg = <0x0>;
	// 	  osc-freq = <40000000>;
	// 	  bus-speed = <500000>;
	// 	  bus-speed-data = <2000000>;
	// 	  prop-seg = <0>;
	// 	  phase-seg1 = <15>;
	// 	  phase-seg2 = <4>;
	// 	  sjw = <4>;
	// 	  prop-seg-data = <0>;
	// 	  phase-seg1-data = <7>;
	// 	  phase-seg2-data = <2>;
	// 	  sjw-data = <2>;
	//   };
  };
  
  &pwm0 {
	  status = "okay";
	  pinctrl-0 = <&pwm0_default>;
	  pinctrl-1 = <&pwm0_sleep>;
	  pinctrl-names = "default", "sleep";
  };
  
  // TODO: check dc, cs and reset gpios once PCB is manufactured,
  // it may be a bit different
  &spi4  {
      status = "okay";
      compatible = "nordic,nrf-spim";
      pinctrl-0 = <&spi4_default>;
      pinctrl-1 = <&spi4_sleep>;
      pinctrl-names = "default", "sleep";
      cs-gpios = <&gpio0 6 GPIO_ACTIVE_LOW>;
  
      spd2010: spd2010@0 {
          compatible = "solomon,spd2010";
          status = "okay";
          spi-max-frequency = <40000000>;
          reg = <0>;
          width = <180>;
          height = <454>;
          label = "solomon_spd2010";
          dc-gpios = <&gpio0 12 GPIO_ACTIVE_HIGH>;
          reset-gpios = <&gpio0 5 GPIO_ACTIVE_HIGH>;
      };
  };
  